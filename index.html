<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomeFix Pro - Dịch vụ sửa chữa nhà chuyên nghiệp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="floating-buttons">
        <a href="https://www.facebook.com/messages/e2ee/t/29281478601496059" target="_blank" class="floating-button messenger-button">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Facebook_Messenger_logo_2020.svg/1200px-Facebook_Messenger_logo_2020.svg.png" alt="Messenger">
        </a>
        <a href="https://zalo.me/0825181939" target="_blank" class="floating-button zalo-button">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Icon_of_Zalo.svg/1200px-Icon_of_Zalo.svg.png" alt="Zalo">
        </a>
    </div>

    <header>
        <div class="container">
            <nav class="navbar navbar-expand-lg nav-bg">
                <div class="container-fluid">
                    <div class="logo">HomeFix<span>Pro</span>
                </div>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse navbar-bg" id="navbarNav">
                    <ul class="navbar-nav nav-links">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#" onclick="showPage('home-page')">Trang Chủ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#" onclick="showPage('about-page')">Về chúng tôi</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#" onclick="showPage('services-page')">Dịch vụ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#" onclick="openAuthModal('signin')">Đăng nhập</a>
                        </li>
                        <li class="nav-item"><a href="#" id="profile-nav" style="display: none;" onclick="showPage('profile-page')">Hồ sơ cá nhân</a><li>
                        <li class="nav-item"><a href="#" id="logout-nav" style="display: none;" onclick="logout()">Đăng xuất</a></li>
                    </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <div id="home-page" class="page-content">
        <section class="hero">
            <div class="image-with-overlay">
                <img src="https://lh3.googleusercontent.com/KqNtDg6qsDIqjPmfsICJnmWJQPO8SUACkdkyh-C2rNW61L-ByQhA6yi-Z0jOUf7eGG2nyDKOdvqKRK0eJrRPFtUbS-TZ4-TCVA" alt="Đội ngũ kỹ thuật viên chuyên nghiệp đang làm việc">
                <div class="image-overlay">
                    <div class="overlay-content">
                        <h3>Đội ngũ chuyên nghiệp của chúng tôi</h3>
                        <p>Tất cả các kỹ thuật viên của chúng tôi đều là những chuyên gia được chứng nhận với nhiều năm kinh nghiệm trong lĩnh vực của họ. Chúng tôi đảm bảo chất lượng công việc cho mỗi dự án.</p>
                        <a href="#booking-section" class="btn btn-primary">Đặt kỹ thuật viên ngay</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="booking-section">
            <div class="container">
                <div class="section-title">
                    <h2>Đặt kỹ thuật viên</h2>
                    <p>Hãy cho chúng tôi biết bạn cần hỗ trợ gì, chúng tôi sẽ kết nối bạn với chuyên gia phù hợp tại khu vực của bạn.</p>
                </div>
                
                <div id="alert-container"></div>
                
                <div class="form-card">
                    <form id="service-form">
                        <div class="form-group">
                            <label for="service-type">Bạn cần loại dịch vụ nào?</label>
                            <select id="service-type" class="form-control" required>
                                <option value="" selected disabled>Chọn loại dịch vụ</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="detailed-service">Dịch vụ chi tiết</label>
                            <select id="detailed-service" class="form-control" required>
                                <option value="" selected disabled>Chọn dịch vụ chi tiết</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="district">Chọn khu vực của bạn</label>
                            <select id="district" class="form-control" required>
                                <option value="" selected disabled>Chọn khu vực</option>
                                <option value="district1">Quận 1</option>
                                <option value="district3">Quận 3</option>
                                <option value="district4">Quận 4</option>
                                <option value="district5">Quận 5</option>
                                <option value="district6">Quận 6</option>
                                <option value="district7">Quận 7</option>
                                <option value="district8">Quận 8</option>
                                <option value="district10">Quận 10</option>
                                <option value="district11">Quận 11</option>
                                <option value="district12">Quận 12</option>
                                <option value="districtTD">Thành phố Thủ Đức</option>
                                <option value="districtBThanh">Quận Bình Thạnh</option>
                                <option value="districtTPhu">Quận Tân Phú</option>
                                <option value="districtTBinh">Quận Tân Bình</option>
                                <option value="districtBTan">Quận Bình Tân</option>
                                <option value="districtGVap">Quận Gò Vấp</option>
                                <option value="districtPNh">Quận Phú Nhuận</option>
                            </select>
                        </div>
                        
                        <button type="button" class="btn btn-primary" onclick="findTechnicians()">Tìm kỹ thuật viên</button>
                    </form>
                </div>
                
                <div id="technician-list" class="technician-list">
                    <h3>Kỹ thuật viên sẵn sàng</h3>
                </div>
                
                <div id="technician-detail" class="technician-detail"></div>
                
                <div id="booking-form" class="booking-form form-card">
                    <h3>Hoàn tất đặt lịch</h3>
                    <form id="contact-form">
                        <div class="form-group">
                            <label for="name">Tên của bạn</label>
                            <input type="text" id="name" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Số điện thoại</label>
                            <input type="tel" id="phone" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="address">Địa chỉ</label>
                            <textarea id="address" class="form-control" rows="3" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="date">Ngày mong muốn</label>
                            <input type="date" id="date" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="time">Thời gian mong muốn</label>
                            <select id="time" class="form-control" required>
                                <option value="" selected disabled>Chọn thời gian</option>
                                <option value="morning">Sáng (8:00 - 12:00)</option>
                                <option value="afternoon">Chiều (12:00 - 18:00)</option>
                                <option value="evening">Tối (18:00 - 20:00)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Ghi chú thêm</label>
                            <textarea id="notes" class="form-control" rows="3"></textarea>
                        </div>
                        
                        <button type="button" class="btn btn-primary" onclick="completeBooking()">Hoàn tất đặt lịch</button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <div id="services-page" class="page-content">
        <section class="hero">
            <div class="image-with-overlay">
                <img src="https://lh3.googleusercontent.com/KqNtDg6qsDIqjPmfsICJnmWJQPO8SUACkdkyh-C2rNW61L-ByQhA6yi-Z0jOUf7eGG2nyDKOdvqKRK0eJrRPFtUbS-TZ4-TCVA" alt="Đội ngũ kỹ thuật viên chuyên nghiệp đang làm việc">
                <div class="image-overlay">
                    <div class="overlay-content">
                        <h3>Dịch vụ của chúng tôi</h3>
                        <p>Dịch vụ sửa chữa và bảo trì nhà cửa chuyên nghiệp cho mọi nhu cầu của bạn</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="section-title">
                    <h2>Dịch vụ chúng tôi cung cấp</h2>
                    <p>Chúng tôi cung cấp một loạt các dịch vụ sửa chữa và bảo trì nhà cửa chuyên nghiệp để giữ cho ngôi nhà của bạn luôn trong tình trạng hoàn hảo.</p>
                </div>
                
                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-img">
                            <img src="https://cdn2.system1.com/eyJidWNrZXQiOiJvbS1wdWItc3RvcmFnZSIsImtleSI6IndhbGxldGdlbml1cy93cC1jb250ZW50L3VwbG9hZHMvMjAyMi8wNS9zaHV0dGVyc3RvY2tfNjI3OTg0ODQ4LmpwZyIsImVkaXRzIjp7IndlYnAiOnsicXVhbGl0eSI6NDB9fX0=" alt="Dịch vụ sửa chữa điện">
                        </div>
                        <div class="service-content">
                            <h3>Sửa chữa điện</h3>
                            <p>Các thợ điện được cấp phép của chúng tôi có thể xử lý mọi thứ từ sửa chữa nhỏ đến lắp đặt hệ thống điện hoàn chỉnh. Chúng tôi đảm bảo tất cả công việc điện đều đạt tiêu chuẩn và an toàn cho ngôi nhà của bạn.</p>
                            <ul>
                                <li>Sửa ổ cắm, công tắc bị hỏng</li>
                                <li>Thay bóng đèn, đèn LED</li>
                                <li>Sửa chập điện, mất điện cục bộ</li>
                                <li>Đi dây điện mới (trong nhà)</li>
                                <li>Kiểm tra & sửa CB, aptomat</li>
                                <li>Thi công điện âm tường</li>
                                <li>Sửa quạt điện, máy nước nóng</li>
                                <li>Kiểm tra rò điện, đo tải</li>
                            </ul>
                        </div>
                        <div class="service-button">
                            <a href="#booking-section" class="btn btn-secondary" onclick="preSelectService('electrical')">Đặt ngay</a>
                        </div>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-img">
                            <img src="https://www.build-review.com/wp-content/uploads/2021/03/Plumbing.jpg" alt="Dịch vụ sửa chữa ống nước">
                        </div>
                        <div class="service-content">
                            <h3>Sửa chữa ống nước</h3>
                            <p>Từ vòi nước bị rò rỉ đến thay thế đường ống, các thợ sửa ống nước chuyên nghiệp của chúng tôi cung cấp dịch vụ nhanh chóng, đáng tin cậy để khắc phục mọi vấn đề về ống nước trong nhà bạn.</p>
                            <ul>
                                <li>Sửa vòi nước rò rỉ</li>
                                <li>Thông nghẹt bồn rửa, lavabo</li>
                                <li>Lắp đặt máy nước nóng</li>
                                <li>Thay ống nước bị bể</li>
                                <li>Sửa bồn cầu rò rỉ</li>
                            </ul>
                        </div>
                        <div class="service-button">
                            <a href="#booking-section" class="btn btn-secondary" onclick="preSelectService('plumbing')">Đặt ngay</a>
                        </div>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-img">
                            <img src="https://t3.ftcdn.net/jpg/03/93/83/32/360_F_393833200_rlqHHBoOP0M1vDwn.jpg" alt="Dịch vụ điện lạnh">
                        </div>
                        <div class="service-content">
                            <h3>Điện lạnh</h3>
                            <p>Các kỹ thuật viên được chứng nhận của chúng tôi chuyên về cả hệ thống điện và làm lạnh, cung cấp các giải pháp toàn diện để giữ cho ngôi nhà hoặc doanh nghiệp của bạn hoạt động trơn tru.</p>
                            <ul>
                                <li>Sửa máy lạnh không lạnh, chảy nước</li>
                                <li>Bơm gas, vệ sinh máy lạnh</li>
                                <li>Sửa tủ lạnh không làm lạnh</li>
                                <li>Thay block, quạt tủ lạnh</li>
                                <li>Sửa máy giặt không hoạt động</li>
                                <li>Kiểm tra và thay tụ điện, board mạch</li>
                                <li>Lắp đặt máy lạnh, máy giặt</li>
                                <li>Sửa máy nước nóng lạnh</li>
                            </ul>
                        </div>
                        <div class="service-button">
                            <a href="#booking-section" class="btn btn-secondary" onclick="preSelectService('hvac')">Đặt ngay</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="about-page" class="page-content">
        <section class="hero">
            <div class="image-with-overlay">
                <img src="https://lh3.googleusercontent.com/KqNtDg6qsDIqjPmfsICJnmWJQPO8SUACkdkyh-C2rNW61L-ByQhA6yi-Z0jOUf7eGG2nyDKOdvqKRK0eJrRPFtUbS-TZ4-TCVA" alt="Đội ngũ kỹ thuật viên chuyên nghiệp đang làm việc">
                <div class="image-overlay">
                    <div class="overlay-content">
                        <h1>Về HomeFix Pro</h1>
                        <p>Đối tác đáng tin cậy của bạn cho mọi dịch vụ sửa chữa và bảo trì nhà cửa</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="about-content">
                    <div class="about-image">
                        <img src="/api/placeholder/600/400" alt="Đội ngũ của chúng tôi" width="100%" height="100%">
                    </div>
                    <div class="about-text">
                        <h3>Chúng tôi là ai</h3>
                        <p>HomeFix Pro được thành lập vào năm 2025 với sứ mệnh đơn giản: kết nối gia đình với các kỹ thuật viên đáng tin cậy, lành nghề cho mọi nhu cầu sửa chữa nhà cửa. Từ một dịch vụ địa phương nhỏ, chúng tôi đã phát triển thành một nền tảng đáng tin cậy phục vụ nhiều khu vực.</p>
                        <p>Chúng tôi kiểm tra kỹ lưỡng tất cả các kỹ thuật viên trên nền tảng của mình, đảm bảo họ có giấy phép, bảo hiểm và kinh nghiệm phù hợp để cung cấp dịch vụ chất lượng cao. Quy trình lựa chọn nghiêm ngặt của chúng tôi đảm bảo rằng bạn có thể yên tâm khi biết rằng chỉ có những chuyên gia đủ tiêu chuẩn mới làm việc tại nhà bạn.</p>
                        <p>Chúng tôi tin tưởng vào sự minh bạch, đáng tin cậy và xuất sắc trong mọi việc chúng tôi làm. Khi bạn đặt một kỹ thuật viên qua HomeFix Pro, bạn không chỉ nhận được một nhà cung cấp dịch vụ – bạn nhận được một đối tác quan tâm đến chất lượng công việc tại nhà bạn.</p>
                    </div>
                </div>
                
                <div class="mission-vision">
                    <div class="section-title">
                        <h2>Sứ mệnh, Tầm nhìn & Giá trị</h2>
                        <p>Những nguyên tắc dẫn dắt công việc của chúng tôi</p>
                    </div>
                    
                    <div class="mission-vision-flex">
                        <div class="mission-box">
                            <h3>Sứ mệnh của chúng tôi</h3>
                            <p>Cung cấp cho gia chủ quyền truy cập dễ dàng vào các dịch vụ sửa chữa nhà đáng tin cậy, lành nghề và giá cả phải chăng, đảm bảo mọi nhu cầu bảo trì nhà cửa đều được đáp ứng với sự chuyên nghiệp và tận tâm.</p>
                            <p>Chúng tôi nỗ lực tạo ra một nền tảng nơi các kỹ thuật viên chất lượng có thể kết nối với khách hàng đánh giá cao chuyên môn của họ, xây dựng mối quan hệ lâu dài dựa trên sự tin tưởng và dịch vụ xuất sắc.</p>
                        </div>
                        
                        <div class="vision-box">
                            <h3>Tầm nhìn của chúng tôi</h3>
                            <p>Trở thành nền tảng dịch vụ nhà cửa đáng tin cậy nhất trên toàn quốc, cách mạng hóa cách mọi người duy trì và cải thiện ngôi nhà của họ bằng cách làm cho sự trợ giúp chuyên nghiệp trở nên dễ tiếp cận với tất cả mọi người.</p>
                            <p>Chúng tôi hình dung một tương lai nơi gia chủ có thể tự tin giải quyết mọi thách thức sửa chữa nhà chỉ với vài cú nhấp chuột, biết rằng họ sẽ nhận được dịch vụ nhanh chóng, chất lượng cao mỗi lần.</p>
                        </div>
                        
                        <div class="values-box">
                            <h3>Giá trị của chúng tôi</h3>
                            <p>Tại HomeFix Pro, các giá trị cốt lõi thúc đẩy mọi việc chúng tôi làm. Chúng tôi tin vào sự chính trực trong mọi tương tác, sự xuất sắc trong chất lượng dịch vụ và xây dựng mối quan hệ lâu dài với khách hàng và kỹ thuật viên.</p>
                            <p>Chúng tôi cam kết cải tiến liên tục, đón nhận sự đổi mới để làm cho việc sửa chữa nhà trở nên dễ dàng và dễ tiếp cận hơn cho mọi người.</p>
                        </div>
                    </div>
                </div>
                <div class="core-values">
                    <div class="section-title">
                        <h2>Giá trị cốt lõi</h2>
                        <p>Những nguyên tắc định hướng văn hóa và dịch vụ của chúng tôi</p>
                    </div>
                    
                    <div class="values-grid">
                        <div class="value-card">
                            <div class="value-icon">💼</div>
                            <h4>Chuyên nghiệp</h4>
                            <p>Chúng tôi duy trì các tiêu chuẩn chuyên nghiệp cao nhất trong mỗi dịch vụ mà chúng tôi cung cấp, đảm bảo các kỹ thuật viên của chúng tôi lành nghề và lịch sự.</p>
                        </div>
                        
                        <div class="value-card">
                            <div class="value-icon">⭐</div>
                            <h4>Xuất sắc</h4>
                            <p>Chúng tôi phấn đấu đạt được sự xuất sắc trong mọi công việc sửa chữa và dịch vụ, vượt qua mong đợi của khách hàng.</p>
                        </div>
                        
                        <div class="value-card">
                            <div class="value-icon">🤝</div>
                            <h4>Chính trực</h4>
                            <p>Chúng tôi hành động với sự trung thực và minh bạch trong mọi giao dịch, xây dựng niềm tin thông qua dịch vụ đáng tin cậy và giá cả công bằng.</p>
                        </div>
                        
                        <div class="value-card">
                            <div class="value-icon">⏱️</div>
                            <h4>Đáng tin cậy</h4>
                            <p>Chúng tôi đến đúng giờ và hoàn thành công việc như đã hứa, tôn trọng lịch trình và cam kết của khách hàng.</p>
                        </div>
                        
                        <div class="value-card">
                            <div class="value-icon">🔄</div>
                            <h4>Trách nhiệm</h4>
                            <p>Chúng tôi chịu trách nhiệm về công việc của mình và đứng sau các dịch vụ của chúng tôi với cam kết hài lòng.</p>
                        </div>
                        
                        <div class="value-card">
                            <div class="value-icon">💡</div>
                            <h4>Đổi mới</h4>
                            <p>Chúng tôi không ngừng tìm kiếm các cách tốt hơn để phục vụ khách hàng thông qua công nghệ mới và quy trình cải tiến.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="profile-page" class="page-content">
        <section class="section">
            <div class="container">
                <div class="section-title">
                    <h2>Hồ sơ cá nhân</h2>
                    <p>Quản lý thông tin cá nhân và lịch sử đặt lịch của bạn</p>
                </div>
                <div id="profile-info"></div>
                <h3>Lịch sử đặt lịch</h3>
                <div id="booking-history"></div>
                <button class="btn btn-secondary" onclick="logout()">Đăng xuất</button>
            </div>
        </section>
    </div>

    <!-- Sign-Up/Sign-In Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="closeModal" onclick="closeModal('authModal')">×</span>
            <div id="signUpForm" style="display: none;">
                <h2>Đăng ký</h2>
                <form id="signupForm">
                    <input type="text" id="signupName" placeholder="Họ và tên" required>
                    <input type="email" id="signupEmail" placeholder="Email" required>
                    <input type="tel" id="signupPhone" placeholder="Số điện thoại" required>
                    <input type="password" id="signupPassword" placeholder="Mật khẩu" required>
                    <button type="submit" class="btn btn-primary">Đăng ký</button>
                    <p>Đã có tài khoản? <a href="#" onclick="switchAuthForm('signin')">Đăng nhập</a></p>
                </form>
            </div>
            <div id="signInForm" style="display: none;">
                <h2>Đăng nhập</h2>
                <form id="loginForm">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="Mật khẩu" required>
                    <button type="submit" class="btn btn-primary">Đăng nhập</button>
                    <p>Chưa có tài khoản? <a href="#" onclick="switchAuthForm('signup')">Đăng ký</a></p>
                </form>
            </div>
        </div>
    </div>

    <!-- Booking Confirmation Pop-Up -->
    <div id="bookingConfirmModal" class="modal">
        <div class="modal-content">
            <span class="closeModal" onclick="closeModal('bookingConfirmModal')">×</span>
            <h2>Xác nhận đặt lịch</h2>
            <div id="bookingDetails"></div>
            <button class="btn btn-primary" onclick="closeModal('bookingConfirmModal')">OK</button>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>HomeFix Pro</h3>
                    <p>Đối tác đáng tin cậy của bạn cho các dịch vụ sửa chữa nhà chuyên nghiệp. Chất lượng công việc được đảm bảo.</p>
                </div>
                
                <div class="footer-column">
                    <h3>Liên kết nhanh</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showPage('home-page')">Trang chủ</a></li>
                        <li><a href="#" onclick="showPage('about-page')">Về chúng tôi</a></li>
                        <li><a href="#" onclick="showPage('services-page')">Dịch vụ</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Dịch vụ</h3>
                    <ul class="footer-links">
                        <li><a href="#booking-section" onclick="showPage('home-page'); preSelectService('electrical')">Sửa chữa điện</a></li>
                        <li><a href="#booking-section" onclick="showPage('home-page'); preSelectService('plumbing')">Sửa chữa ống nước</a></li>
                        <li><a href="#booking-section" onclick="showPage('home-page'); preSelectService('hvac')">Điện lạnh</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Liên hệ</h3>
                    <ul class="footer-links">
                        <li>Email: <a href="mailto:support@homefixpro.com">support@homefixpro.com</a></li>
                        <li>Điện thoại: (+84) 0825 123 456</li>
                        <li>Địa chỉ: 15 Đường D5, Quận Bình Thạnh, Thành phố Hồ Chí Minh</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2025 HomeFix Pro. Mọi quyền được bảo lưu.</p>
            </div>
        </div>
    </footer>

    <script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
            return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
            if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
                try {
                    var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                    var firstSheetName = workbook.SheetNames[0];
                    var worksheet = workbook.Sheets[firstSheetName];
                    var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                    var filteredData = jsonData.filter(row => row.some(filledCell));
                    var headerRowIndex = filteredData.findIndex((row, index) => 
                        row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length);
                    if (headerRowIndex === -1 || headerRowIndex > 25) {
                        headerRowIndex = 0;
                    }
                    var csv = XLSX.utils.sheet_to_csv(XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)), { header: 1 });
                    return csv;
                } catch (e) {
                    console.error(e);
                    return "";
                }
            }
            return gk_fileData[filename] || "";
        }
    </script>

    <script>
        const serviceTypeMap = {
            "electrical": "Sửa chữa điện",
            "plumbing": "Sửa chữa ống nước",
            "hvac": "Điện lạnh"
        };

        const districtMap = {
            "district1": "Quận 1",
            "district3": "Quận 3",
            "district4": "Quận 4",
            "district5": "Quận 5",
            "district6": "Quận 6",
            "district7": "Quận 7",
            "district8": "Quận 8",
            "district10": "Quận 10",
            "district11": "Quận 11",
            "district12": "Quận 12",
            "districtTD": "Thành phố Thủ Đức",
            "districtBThanh": "Quận Bình Thạnh",
            "districtTPhu": "Quận Tân Phú",
            "districtTBinh": "Quận Tân Bình",
            "districtBTan": "Quận Bình Tân",
            "districtGVap": "Quận Gò Vấp",
            "districtPNh": "Quận Phú Nhuận"
        };

        let selectedTechnician = null;
        let filteredTechnicians = [];
        let servicesData = {};
        let currentUser = null;

        function showPage(pageId) {
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => page.style.display = 'none');
            document.getElementById(pageId).style.display = 'block';

            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('onclick').includes(pageId)) {
                    link.classList.add('active');
                }
            });
            
            window.scrollTo(0, 0);
        }
        
        function preSelectService(serviceType) {
            showPage('home-page');
            setTimeout(() => {
                document.getElementById('booking-section').scrollIntoView({ behavior: 'smooth' });
                document.getElementById('service-type').value = serviceType;
                updateDetailedServices();
            }, 100);
        }

        async function loadServices() {
            const serviceTypeSelect = document.getElementById('service-type');
            serviceTypeSelect.innerHTML = '<option value="" selected disabled>Chọn loại dịch vụ</option>';
            Object.entries(serviceTypeMap).forEach(([key, value]) => {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = value;
                serviceTypeSelect.appendChild(option);
            });

            try {
                const response = await fetch('http://157.230.42.189:5000/api/services');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                servicesData = await response.json();
                updateDetailedServices();
            } catch (error) {
                console.error('Load services error:', error);
                showAlert('Lỗi khi tải danh sách dịch vụ', 'warning');
            }

            serviceTypeSelect.addEventListener('change', updateDetailedServices);
        }

        function updateDetailedServices() {
            const serviceType = document.getElementById('service-type').value;
            const detailedServiceSelect = document.getElementById('detailed-service');
            detailedServiceSelect.innerHTML = '<option value="" selected disabled>Chọn dịch vụ chi tiết</option>';

            if (serviceType && servicesData[serviceType]) {
                servicesData[serviceType].forEach(service => {
                    const option = document.createElement('option');
                    option.value = service.id;
                    option.textContent = `${service.name} (${service.price.toLocaleString('vi-VN')} VNĐ)`;
                    option.dataset.price = service.price;
                    detailedServiceSelect.appendChild(option);
                });
            }
        }

        async function getTechnicians() {
            try {
                const response = await fetch('http://157.230.42.189:5000/api/technicians');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('Get technicians error:', error);
                showAlert('Lỗi khi tải danh sách kỹ thuật viên', 'warning');
                return [];
            }
        }

        async function findTechnicians() {
            const serviceType = document.getElementById('service-type').value;
            const detailedService = document.getElementById('detailed-service').value;
            const district = document.getElementById('district').value;
            
            if (!serviceType || !detailedService || !district) {
                showAlert('Vui lòng chọn đầy đủ loại dịch vụ, chi tiết dịch vụ và khu vực', 'warning');
                return;
            }
            
            filteredTechnicians = (await getTechnicians()).filter(tech => 
                tech.specialties.includes(serviceType) && tech.district === district);
            
            const technicianList = document.getElementById('technician-list');
            technicianList.style.display = 'block';
            
            document.getElementById('technician-detail').style.display = 'none';
            document.getElementById('booking-form').style.display = 'none';
            
            const resultsContainer = document.querySelector('#technician-list h3 + div') || document.createElement('div');
            if (!technicianList.querySelector('h3 + div')) {
                technicianList.appendChild(resultsContainer);
            }
            resultsContainer.innerHTML = '';
            
            if (filteredTechnicians.length === 0) {
                resultsContainer.innerHTML = '<p>Không tìm thấy kỹ thuật viên nào phù hợp. Vui lòng thử lại.</p>';
                return;
            }

            const selectedService = servicesData[serviceType]?.find(s => s.id == detailedService);
            const price = selectedService ? selectedService.price : 0;
            
            filteredTechnicians.forEach(tech => {
                const techCard = document.createElement('div');
                techCard.className = 'technician-card';
                techCard.innerHTML = `
                    <img src="${tech.image}" alt="${tech.name}" class="technician-img">
                    <div class="technician-info">
                        <h3 class="technician-name">${tech.name}</h3>
                        <p class="technician-experience">${tech.experience} năm kinh nghiệm</p>
                        <p class="technician-services">Dịch vụ: ${tech.services}</p>
                        <p class="technician-rating">Đánh giá: ${tech.rating} 
                            ${'★'.repeat(Math.floor(tech.rating))}${tech.rating % 1 >= 0.5 ? '½' : ''}
                        </p>
                        <p class="price-highlight">Giá: ${price.toLocaleString('vi-VN')} VNĐ</p>
                    </div>
                    <button class="btn btn-secondary" onclick="viewTechnician(${tech.id}, ${detailedService}, ${price})">Xem chi tiết</button>
                `;
                resultsContainer.appendChild(techCard);
            });
            
            technicianList.scrollIntoView({ behavior: 'smooth' });
        }
        
        async function viewTechnician(id, serviceId, price) {
            const tech = filteredTechnicians.find(t => t.id === id);
            if (!tech) {
                showAlert('Không tìm thấy kỹ thuật viên', 'warning');
                return;
            }
        
            selectedTechnician = { ...tech, serviceId, price };
        
            const detailContainer = document.getElementById('technician-detail');
            detailContainer.style.display = 'block';
        
            detailContainer.innerHTML = `
                <div class="technician-detail-header">
                    <img src="${tech.image}" alt="${tech.name}" class="technician-detail-img">
                    <div class="technician-detail-title">
                        <h3>${tech.name}</h3>
                        <p>${tech.experience} năm kinh nghiệm</p>
                        <p class="technician-rating">
                            ${tech.rating} ${'★'.repeat(Math.floor(tech.rating))}${tech.rating % 1 >= 0.5 ? '½' : ''}
                        </p>
                    </div>
                </div>
                <div class="technician-detail-body">
                    <div class="technician-detail-section">
                        <h4>Giới thiệu</h4>
                        <p>${tech.bio || 'Không có thông tin giới thiệu.'}</p>
                    </div>
                    <div class="technician-detail-section">
                        <h4>Dịch vụ</h4>
                        <p>${tech.services || 'Không có thông tin dịch vụ.'}</p>
                    </div>
                    <div class="technician-detail-section">
                        <h4>Giá dịch vụ</h4>
                        <p class="price-highlight">Giá: ${price.toLocaleString('vi-VN')} VNĐ</p>
                    </div>
                    <div class="technician-detail-section">
                        <h4>Đánh giá khách hàng</h4>
                        ${tech.reviews?.map(review => `
                            <div class="technician-review">
                                <div class="technician-review-header">
                                    <span class="technician-review-name">${review.name || 'Khách hàng'}</span>
                                    <span class="technician-review-date">${review.date || 'N/A'}</span>
                                </div>
                                <div class="technician-rating">
                                    ${review.rating || 0} ${'★'.repeat(review.rating || 0)}
                                </div>
                                <p>${review.comment || 'Không có bình luận.'}</p>
                            </div>
                        `).join('') || '<p>Không có đánh giá nào.</p>'}
                    </div>
                    <div class="technician-cta">
                        <button class="btn btn-primary" onclick="showBookingForm()">Đặt kỹ thuật viên</button>
                        <button class="btn btn-secondary" onclick="document.getElementById('technician-detail').style.display = 'none'">Quay lại</button>
                    </div>
                </div>
            `;
        
            detailContainer.scrollIntoView({ behavior: 'smooth' });
        }
        
        function showBookingForm() {
            document.getElementById('booking-form').style.display = 'block';
            document.getElementById('booking-form').scrollIntoView({ behavior: 'smooth' });
        }
        
        async function completeBooking() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;
            const serviceType = document.getElementById('service-type').value;
            const detailedService = document.getElementById('detailed-service').value;
            
            if (!name || !phone || !address || !date || !time || !serviceType || !detailedService) {
                showAlert('Vui lòng điền đầy đủ các trường bắt buộc', 'warning');
                return;
            }
            
            if (!selectedTechnician) {
                showAlert('Vui lòng chọn kỹ thuật viên', 'warning');
                return;
            }

            const bookingData = {
                technicianId: selectedTechnician.id,
                customerName: name,
                phone,
                address,
                serviceType,
                serviceId: selectedTechnician.serviceId,
                price: selectedTechnician.price,
                date,
                time,
                notes: document.getElementById('notes').value,
                userId: currentUser ? currentUser.userId : null
            };

            try {
                const response = await fetch('http://157.230.42.189:5000/api/book', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(bookingData)
                });
                const result = await response.json();
                if (!response.ok) throw new Error(result.message);

                showBookingConfirmation(result.booking);

                showAlert(result.message, 'success');
                document.getElementById('booking-form').reset();
                document.getElementById('booking-form').style.display = 'none';
                document.getElementById('technician-detail').style.display = 'none';
                document.getElementById('technician-list').style.display = 'none';
                
                document.getElementById('service-form').reset();
                document.getElementById('detailed-service').innerHTML = '<option value="" selected disabled>Chọn dịch vụ chi tiết</option>';
                
                selectedTechnician = null;
                filteredTechnicians = [];
            } catch (error) {
                console.error('Booking error:', error);
                showAlert('Lỗi khi đặt lịch: ' + error.message, 'warning');
            }
        }

        // Auth Functions
        function openAuthModal(formType) {
            document.getElementById('authModal').style.display = 'flex';
            switchAuthForm(formType);
        }

        function switchAuthForm(formType) {
            document.getElementById('signUpForm').style.display = formType === 'signup' ? 'block' : 'none';
            document.getElementById('signInForm').style.display = formType === 'signin' ? 'block' : 'none';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        async function handleSignUp(event) {
            event.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;

            try {
                const response = await fetch('http://157.230.42.189:5000/api/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, phone, password })
                });
                const result = await response.json();
                if (!response.ok) throw new Error(result.message);

                currentUser = { userId: result.userId, name };
                updateNav();
                closeModal('authModal');
                showAlert('Đăng ký thành công!', 'success');
                loadProfile();
            } catch (error) {
                console.error('Sign-up error:', error);
                showAlert('Lỗi khi đăng ký: ' + error.message, 'warning');
            }
        }

        async function handleSignIn(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const response = await fetch('http://157.230.42.189:5000/api/signin', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const result = await response.json();
                if (!response.ok) throw new Error(result.message);

                currentUser = { userId: result.userId, name: result.name };
                updateNav();
                closeModal('authModal');
                showAlert('Đăng nhập thành công!', 'success');
                loadProfile();
            } catch (error) {
                console.error('Sign-in error:', error);
                showAlert('Lỗi khi đăng nhập: ' + error.message, 'warning');
            }
        }

        function logout() {
            currentUser = null;
            updateNav();
            showPage('home-page');
            showAlert('Đã đăng xuất', 'success');
        }

        // Profile Functions
        async function loadProfile() {
            if (!currentUser) {
                showPage('home-page');
                return;
            }

            try {
                const response = await fetch(`http://157.230.42.189:5000/api/user/${currentUser.userId}`);
                if (!response.ok) throw new Error('Failed to fetch user');
                const user = await response.json();

                const profileInfo = document.getElementById('profile-info');
                profileInfo.innerHTML = `
                    <p><strong>Họ tên:</strong> ${user.name}</p>
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>Số điện thoại:</strong> ${user.phone}</p>
                `;

                const bookingsResponse = await fetch(`http://157.230.42.189:5000/api/user/${currentUser.userId}/bookings`);
                if (!bookingsResponse.ok) throw new Error('Failed to fetch bookings');
                const bookings = await bookingsResponse.json();

                const bookingHistory = document.getElementById('booking-history');
                bookingHistory.innerHTML = bookings.length ? bookings.map(b => `
                    <div class="booking-history-item">
                        <p><strong>Mã đặt lịch:</strong> ${b.id}</p>
                        <p><strong>Dịch vụ:</strong> ${servicesData[b.serviceType]?.find(s => s.id === b.serviceId)?.name || 'N/A'}</p>
                        <p><strong>Kỹ thuật viên:</strong> ${(filteredTechnicians.find(t => t.id === b.technicianId) || {}).name || 'N/A'}</p>
                        <p><strong>Giá:</strong> ${b.price.toLocaleString('vi-VN')} VNĐ</p>
                        <p><strong>Ngày:</strong> ${b.date}</p>
                        <p><strong>Thời gian:</strong> ${getTimeSlot(b.time)}</p>
                        <p><strong>Địa chỉ:</strong> ${b.address}</p>
                        <p><strong>Ghi chú:</strong> ${b.notes || 'Không có'}</p>
                        <p><strong>Ngày đặt:</strong> ${new Date(b.createdAt).toLocaleString('vi-VN')}</p>
                    </div>
                `).join('') : '<p>Chưa có lịch sử đặt lịch.</p>';

                showPage('profile-page');
            } catch (error) {
                console.error('Load profile error:', error);
                showAlert('Lỗi khi tải hồ sơ', 'warning');
            }
        }

        // Booking Confirmation Pop-Up
        function showBookingConfirmation(booking) {
            const modal = document.getElementById('bookingConfirmModal');
            const details = document.getElementById('bookingDetails');
            const service = servicesData[booking.serviceType]?.find(s => s.id === booking.serviceId);
            const technician = filteredTechnicians.find(t => t.id === booking.technicianId);

            details.innerHTML = `
                <p><strong>Dịch vụ:</strong> ${service?.name || 'N/A'}</p>
                <p><strong>Kỹ thuật viên:</strong> ${technician?.name || 'N/A'}</p>
                <p><strong>Giá:</strong> ${booking.price.toLocaleString('vi-VN')} VNĐ</p>
                <p><strong>Khách hàng:</strong> ${booking.customerName}</p>
                <p><strong>Số điện thoại:</strong> ${booking.phone}</p>
                <p><strong>Địa chỉ:</strong> ${booking.address}</p>
                <p><strong>Ngày:</strong> ${booking.date}</p>
                <p><strong>Thời gian:</strong> ${getTimeSlot(booking.time)}</p>
                <p><strong>Ghi chú:</strong> ${booking.notes || 'Không có'}</p>
                <p><strong>Ngày đặt:</strong> ${new Date(booking.createdAt).toLocaleString('vi-VN')}</p>
            `;

            modal.style.display = 'flex';
        }

        function updateNav() {
            const loginNav = document.querySelector('.nav-links a[onclick*="signin"]');
            const profileNav = document.getElementById('profile-nav');
            const logoutNav = document.getElementById('logout-nav');

            if (currentUser) {
                loginNav.style.display = 'none';
                profileNav.style.display = 'inline';
                logoutNav.style.display = 'inline';
            } else {
                loginNav.style.display = 'inline';
                profileNav.style.display = 'none';
                logoutNav.style.display = 'none';
            }
        }

        function getTimeSlot(timeCode) {
            const timeSlots = {
                'morning': 'Sáng (8:00 - 12:00)',
                'afternoon': 'Chiều (12:00 - 18:00)',
                'evening': 'Tối (18:00 - 20:00)'
            };
            return timeSlots[timeCode] || timeCode;
        }

        function showAlert(message, type) {
            const alertContainer = document.getElementById('alert-container');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = message;
            
            alertContainer.innerHTML = '';
            alertContainer.appendChild(alert);
            
            setTimeout(() => {
                alert.style.opacity = '0';
                alert.style.transition = 'opacity 0.5s';
                setTimeout(() => alert.remove(), 500);
            }, 5000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const style = document.createElement('style');
            style.innerHTML = `
                .alert {
                    transition: opacity 0.5s;
                }
                
                .alert-info {
                    background-color: #d1ecf1;
                    color: #0c5460;
                    border: 1px solid #bee5eb;
                }
            `;
            document.head.appendChild(style);
            loadServices();
            document.getElementById('signupForm').addEventListener('submit', handleSignUp);
            document.getElementById('loginForm').addEventListener('submit', handleSignIn);
        });
    </script>
    <script src="./scripts.js"></script>
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</body>
</html>
